2025-11-24 17:09:30,013 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:30,016 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:30,032 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:30,053 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:30,087 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:30,114 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:30,416 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:30,429 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:30,431 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:30,452 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:30,473 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:31,242 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:31,321 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:31,325 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:31,330 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:31,333 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:31,342 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:31,345 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:31,411 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:31,413 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:31,419 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:31,422 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:31,425 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:31,436 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:31,545 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:31,550 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:31,556 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:31,560 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:31,561 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:31,563 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:31,605 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:31,610 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:31,613 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:31,615 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:31,617 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:31,666 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:31,749 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:31,782 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:31,788 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:31,818 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:31,827 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:31,843 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:31,932 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:31,935 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:31,936 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:31,939 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:31,942 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:31,948 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:32,021 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:32,023 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:32,024 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:32,026 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:32,028 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:32,031 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:32,064 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:32,068 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:32,070 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:32,072 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:32,075 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:32,130 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:32,177 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:32,181 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:32,184 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:32,186 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:32,188 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:32,190 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:32,232 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:32,236 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:32,238 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:32,241 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:32,243 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:32,249 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:32,330 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:32,336 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:32,378 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:32,382 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:32,387 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:32,410 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks
2025-11-24 17:09:32,448 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:32,451 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:32,453 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:32,455 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:32,457 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:32,487 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:09:32,515 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:09:32,516 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:32,517 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:09:32,519 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:09:32,521 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:09:32,522 [INFO] project_manager: Method: GET, Path: /api/project-manager/api/tasks/
2025-11-24 17:09:32,547 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:09:32,548 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:09:32,550 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:09:32,551 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:09:32,553 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:09:32,556 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:10:06,701 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:10:06,715 [INFO] project_manager: Method: POST, Path: /api/project-manager/api/tasks/
2025-11-24 17:10:06,726 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:10:06,745 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:10:06,789 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:10:06,800 [INFO] project_manager: Method: POST, Path: /api/project-manager/api/tasks/
2025-11-24 17:10:06,849 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:10:06,852 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:10:06,855 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:10:06,857 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:10:06,859 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:10:06,863 [INFO] project_manager: 
2025-11-24 17:10:06,865 [INFO] project_manager: =============================================================
2025-11-24 17:10:06,872 [INFO] project_manager: ========== CREATE TASK REQUEST START ==========
2025-11-24 17:10:06,880 [INFO] project_manager: =============================================================
2025-11-24 17:10:06,884 [INFO] project_manager: Method: POST
2025-11-24 17:10:06,886 [INFO] project_manager: Path: /api/project-manager/api/tasks/
2025-11-24 17:10:06,888 [INFO] project_manager: Request data: {'title': 'Test Task', 'description': '<p><strong style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">Docker</strong><span style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">&nbsp;is a platform designed to help developers build, share, and run container applications. We handle the tedious setup, so you can focus on the code.</span></p>', 'start_date': '2025-11-18', 'due_date': '2025-11-25', 'priority': 'medium', 'status': 'not_started', 'progress_percentage': '10'}
2025-11-24 17:10:06,889 [INFO] project_manager: ========== GET_CURRENT_USER_INFO START ==========
2025-11-24 17:10:06,893 [WARNING] project_manager: ⚠ JWT payload not found, trying direct token extraction...
2025-11-24 17:10:06,898 [INFO] project_manager: ✓ Extracted user from unverified token (fallback): {'id': 'support@appbrew.com', 'first_name': 'Achmed', 'last_name': 'Achmed', 'email': 'support@appbrew.com', 'username': 'aachmed1080', 'role': 'staff'}
2025-11-24 17:10:06,900 [INFO] project_manager: ========== GET_CURRENT_USER_INFO END ==========
2025-11-24 17:10:06,902 [INFO] project_manager: ✓ Current user authenticated: {'id': 'support@appbrew.com', 'first_name': 'Achmed', 'last_name': 'Achmed', 'email': 'support@appbrew.com', 'username': 'aachmed1080', 'role': 'staff'}
2025-11-24 17:10:06,907 [INFO] project_manager: ✓ Request data validated
2025-11-24 17:10:06,911 [INFO] project_manager: Task created without assignment
2025-11-24 17:10:06,915 [INFO] project_manager: ✓ Assigned user details: {'first_name': '', 'last_name': '', 'email': ''}
2025-11-24 17:10:06,929 [INFO] project_manager: Creating task with data: {'title': 'Test Task', 'description': '<p><strong style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">Docker</strong><span style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">&nbsp;is a platform designed to help developers build, share, and run container applications. We handle the tedious setup, so you can focus on the code.</span></p>', 'start_date': datetime.date(2025, 11, 18), 'due_date': datetime.date(2025, 11, 25), 'priority': 'medium', 'status': 'not_started', 'assigned_to_id': None, 'tenant_id': None, 'assigned_by_id': 'support@appbrew.com', 'assigned_by_first_name': 'Achmed', 'assigned_by_last_name': 'Achmed', 'assigned_by_email': 'support@appbrew.com', 'assigned_to_first_name': '', 'assigned_to_last_name': '', 'assigned_to_email': ''}
2025-11-24 17:10:07,526 [ERROR] django.request: Internal Server Error: /api/project-manager/api/tasks/
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.UndefinedTable: relation "tasks_task" does not exist
LINE 1: INSERT INTO "tasks_task" ("id", "tenant_id", "title", "descr...
                    ^


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/tasks/views.py", line 267, in create
    task = Task.objects.create(**task_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "/app/tasks/models.py", line 98, in save
    super().save(*args, **kwargs)
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/usr/local/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.ProgrammingError: relation "tasks_task" does not exist
LINE 1: INSERT INTO "tasks_task" ("id", "tenant_id", "title", "descr...
                    ^

2025-11-24 17:10:07,645 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
2025-11-24 17:14:25,201 [INFO] project_manager: ========== JWT MIDDLEWARE START ==========
2025-11-24 17:14:25,203 [INFO] project_manager: Method: POST, Path: /api/project-manager/api/tasks/
2025-11-24 17:14:25,206 [INFO] project_manager: ✓ JWT user object attached as SimpleLazyObject
2025-11-24 17:14:25,209 [INFO] project_manager: ========== JWT MIDDLEWARE END ==========
2025-11-24 17:14:25,211 [INFO] project_manager: ========== TENANT MIDDLEWARE START ==========
2025-11-24 17:14:25,213 [INFO] project_manager: Method: POST, Path: /api/project-manager/api/tasks/
2025-11-24 17:14:25,309 [WARNING] project_manager: ✗ Could not fetch public key: 401 - falling back to AnonymousUser
2025-11-24 17:14:25,319 [INFO] project_manager: User: AnonymousUser
2025-11-24 17:14:25,324 [INFO] project_manager: User type: SimpleLazyObject
2025-11-24 17:14:25,336 [INFO] project_manager: User is_authenticated: False
2025-11-24 17:14:25,338 [INFO] project_manager: No schema switching - using default database connection
2025-11-24 17:14:25,709 [INFO] project_manager: 
2025-11-24 17:14:25,711 [INFO] project_manager: =============================================================
2025-11-24 17:14:25,713 [INFO] project_manager: ========== CREATE TASK REQUEST START ==========
2025-11-24 17:14:25,714 [INFO] project_manager: =============================================================
2025-11-24 17:14:25,716 [INFO] project_manager: Method: POST
2025-11-24 17:14:25,717 [INFO] project_manager: Path: /api/project-manager/api/tasks/
2025-11-24 17:14:25,719 [INFO] project_manager: Request data: {'title': 'Test Task', 'description': '<p><strong style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">Docker</strong><span style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">&nbsp;is a platform designed to help developers build, share, and run container applications. We handle the tedious setup, so you can focus on the code.</span></p>', 'start_date': '2025-11-18', 'due_date': '2025-11-25', 'priority': 'medium', 'status': 'not_started', 'progress_percentage': '10'}
2025-11-24 17:14:25,721 [INFO] project_manager: ========== GET_CURRENT_USER_INFO START ==========
2025-11-24 17:14:25,722 [WARNING] project_manager: ⚠ JWT payload not found, trying direct token extraction...
2025-11-24 17:14:25,724 [INFO] project_manager: ✓ Extracted user from unverified token (fallback): {'id': 'support@appbrew.com', 'first_name': 'Achmed', 'last_name': 'Achmed', 'email': 'support@appbrew.com', 'username': 'aachmed1080', 'role': 'staff'}
2025-11-24 17:14:25,726 [INFO] project_manager: ========== GET_CURRENT_USER_INFO END ==========
2025-11-24 17:14:25,727 [INFO] project_manager: ✓ Current user authenticated: {'id': 'support@appbrew.com', 'first_name': 'Achmed', 'last_name': 'Achmed', 'email': 'support@appbrew.com', 'username': 'aachmed1080', 'role': 'staff'}
2025-11-24 17:14:25,731 [INFO] project_manager: ✓ Request data validated
2025-11-24 17:14:25,733 [INFO] project_manager: Task created without assignment
2025-11-24 17:14:25,734 [INFO] project_manager: ✓ Assigned user details: {'first_name': '', 'last_name': '', 'email': ''}
2025-11-24 17:14:25,736 [INFO] project_manager: Creating task with data: {'title': 'Test Task', 'description': '<p><strong style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">Docker</strong><span style="background-color: rgb(31, 31, 31); color: rgb(191, 191, 191);">&nbsp;is a platform designed to help developers build, share, and run container applications. We handle the tedious setup, so you can focus on the code.</span></p>', 'start_date': datetime.date(2025, 11, 18), 'due_date': datetime.date(2025, 11, 25), 'priority': 'medium', 'status': 'not_started', 'assigned_to_id': None, 'tenant_id': None, 'assigned_by_id': 'support@appbrew.com', 'assigned_by_first_name': 'Achmed', 'assigned_by_last_name': 'Achmed', 'assigned_by_email': 'support@appbrew.com', 'assigned_to_first_name': '', 'assigned_to_last_name': '', 'assigned_to_email': ''}
2025-11-24 17:14:25,858 [ERROR] django.request: Internal Server Error: /api/project-manager/api/tasks/
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
psycopg2.errors.NotNullViolation: null value in column "tenant_id" of relation "tasks_task" violates not-null constraint
DETAIL:  Failing row contains (PUB-TASK-000001, null, Test Task, <p><strong style="background-color: rgb(31, 31, 31); color: rgb(..., null, , , , support@appbrew.com, Achmed, Achmed, support@appbrew.com, 2025-11-18, 2025-11-25, medium, not_started, 0, 2025-11-24 17:14:25.749138+00, 2025-11-24 17:14:25.749161+00).


The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/django/core/handlers/exception.py", line 55, in inner
    response = get_response(request)
               ^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/core/handlers/base.py", line 197, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/views/decorators/csrf.py", line 65, in _view_wrapper
    return view_func(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/viewsets.py", line 125, in view
    return self.dispatch(request, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 515, in dispatch
    response = self.handle_exception(exc)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 475, in handle_exception
    self.raise_uncaught_exception(exc)
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 486, in raise_uncaught_exception
    raise exc
  File "/usr/local/lib/python3.11/site-packages/rest_framework/views.py", line 512, in dispatch
    response = handler(request, *args, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/contextlib.py", line 81, in inner
    return func(*args, **kwds)
           ^^^^^^^^^^^^^^^^^^^
  File "/app/tasks/views.py", line 267, in create
    task = Task.objects.create(**task_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/query.py", line 663, in create
    obj.save(force_insert=True, using=self.db)
  File "/app/tasks/models.py", line 98, in save
    super().save(*args, **kwargs)
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 902, in save
    self.save_base(
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1008, in save_base
    updated = self._save_table(
              ^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1169, in _save_table
    results = self._do_insert(
              ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/base.py", line 1210, in _do_insert
    return manager._insert(
           ^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/manager.py", line 87, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/query.py", line 1868, in _insert
    return query.get_compiler(using=using).execute_sql(returning_fields)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/models/sql/compiler.py", line 1882, in execute_sql
    cursor.execute(sql, params)
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 122, in execute
    return super().execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 79, in execute
    return self._execute_with_wrappers(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 92, in _execute_with_wrappers
    return executor(sql, params, many, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 100, in _execute
    with self.db.wrap_database_errors:
  File "/usr/local/lib/python3.11/site-packages/django/db/utils.py", line 91, in __exit__
    raise dj_exc_value.with_traceback(traceback) from exc_value
  File "/usr/local/lib/python3.11/site-packages/django/db/backends/utils.py", line 105, in _execute
    return self.cursor.execute(sql, params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
django.db.utils.IntegrityError: null value in column "tenant_id" of relation "tasks_task" violates not-null constraint
DETAIL:  Failing row contains (PUB-TASK-000001, null, Test Task, <p><strong style="background-color: rgb(31, 31, 31); color: rgb(..., null, , , , support@appbrew.com, Achmed, Achmed, support@appbrew.com, 2025-11-18, 2025-11-25, medium, not_started, 0, 2025-11-24 17:14:25.749138+00, 2025-11-24 17:14:25.749161+00).

2025-11-24 17:14:25,885 [INFO] project_manager: ========== TENANT MIDDLEWARE END ==========
